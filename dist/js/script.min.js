function choosePos(s){return Math.round(Math.random()*s)}function randomX(){return Math.abs(Math.floor(Math.random()*canvas1.width-50))}function randomY(){return Math.abs(Math.floor(Math.random()*canvas1.height-50))}function random(s){return Math.abs(Math.random()*s)+3}function random(s){return Math.abs(Math.random()*s)}var body=document.querySelector("body"),container=document.querySelector(".container"),scoreDiv=container.querySelector(".score > span"),score=0,canvas=function(s,t){this.width=s,this.height=t,this.div,this.positions=new Array,this.create=function(){this.div=document.createElement("div"),this.div.style.width=this.width+"px",this.div.style.height=this.height+"px",this.div.classList.add("canvas"),container.appendChild(this.div)}},canvas1=new canvas(1200,500);canvas1.create();for(var blackOut=function(){this.div,this.create=function(){this.div=document.createElement("div"),this.div.classList.add("black-out"),body.appendChild(this.div)},this.remove=function(){this.div.remove()}},obstacles=[],obstaclesTotal=10,obstacle=function(s,t,e,i){this.div,this.width=s,this.height=t,this.posX=e,this.posY=i,this.create=function(){obstacles.push(this),this.div=document.createElement("div"),this.div.classList.add("obstacle"),this.div.style.width=this.width+"px",this.div.style.height=this.height+"px",this.div.style.top=this.posY+"px",this.div.style.left=this.posX+"px",container.querySelector(".canvas").appendChild(this.div)}},i=0;i<obstaclesTotal;i++){var obstacle1=new obstacle(50,50,randomX(),randomY());obstacles.push(obstacle1),obstacle1.create()}for(var cheeses=[],cheesesTotal=5,cheese=function(s,t,e,i){this.div,this.width=s,this.height=t,this.posX=e,this.posY=i,cheesePositions=[this.posX,this.posY,this.width,this.height],this.verification=function(){do{for(var s=!1,t=0;t<=canvas1.positions.length-1;t++)canvas1.positions[t][0]==this.posX||canvas1.positions[t][1]==this.posY?(this.posX=randomX(),this.posY=randomY(),s=!0):s=!1}while(1==s)},this.create=function(){this.verification(),this.div=document.createElement("div"),this.div.classList.add("cheese"),this.div.style.width=this.width+"px",this.div.style.height=this.height+"px",this.div.style.top=this.posY+"px",this.div.style.left=this.posX+"px",container.querySelector(".canvas").appendChild(this.div),canvas1.positions.push(cheesePositions)},this.update=function(){this.posX=randomX(),this.posY=randomY(),this.div.style.top=this.posY+"px",this.div.style.left=this.posX+"px"}},i=0;i<20;i++){var cheese1=new cheese(50,50,20,20);cheese1.create(),cheeses.push(cheese1)}for(var rottenCheeses=[],rottenTotal=3,rottenCheese=function(s,t,e,i){this.width=s,this.height=t,this.dirX,this.posX=e,this.posY=i,this.div,this.create=function(){this.div=document.createElement("div"),this.div.classList.add("rotten-cheese"),this.div.style.width=this.width+"px",this.div.style.height=this.height+"px",this.div.style.top=this.posY+"px",this.div.style.left=this.posX+"px",container.querySelector(".canvas").appendChild(this.div)},this.update=function(){this.posX=randomX(),this.posY=randomY(),this.div.style.top=this.posY+"px",this.div.style.left=this.posX+"px"}},i=0;i<rottenTotal;i++){var rottenCheese1=new rottenCheese(50,50,randomX(),randomY());rottenCheeses.push(rottenCheese1),rottenCheese1.create()}for(var wines=[],winesTotal=7,wine=function(s,t,e,i){this.width=s,this.height=t,this.dirX,this.posX=e,this.posY=i,this.div,this.create=function(){this.div=document.createElement("div"),this.div.classList.add("wine"),this.div.style.width=this.width+"px",this.div.style.height=this.height+"px",this.div.style.top=this.posY+"px",this.div.style.left=this.posX+"px",container.querySelector(".canvas").appendChild(this.div)},this.update=function(){this.posX=randomX(),this.posY=randomY(),this.div.style.top=this.posY+"px",this.div.style.left=this.posX+"px"}},i=0;i<winesTotal;i++){var wine1=new wine(50,50,randomX(),randomY());wines.push(wine1),wine1.create()}for(var cats=[],catsTotal=6,cat=function(s,t,e){this.width=s,this.height=t,this.posX=randomX(),this.posY=randomY(),this.div,this.create=function(){this.div=document.createElement("div"),this.div.classList.add("cat"),this.div.style.width=this.width+"px",this.div.style.height=this.height+"px",this.div.style.top=this.posY+"px",this.div.style.left=this.posX+"px",container.querySelector(".canvas").appendChild(this.div)},this.direction=function(){var s,t,e=this;position=setInterval(function(){var e=[[-1,0,1],[-1,0,1]];s=e[0][choosePos(e.length)],t=e[1][choosePos(e.length)]},2e3),move=setInterval(function(){if(e.posX<=0)e.posX=canvas1.width-e.width-1;else if(e.posX>=canvas1.width-e.width)e.posX=1;else switch(s){case-1:e.posX-=1,e.div.classList.remove("dir270","dir90","dir0","dir180"),e.div.classList.add("dir270");break;case 0:e.posX=e.posX;break;case 1:e.posX+=1,e.div.classList.remove("dir270","dir90","dir0","dir180"),e.div.classList.add("dir90")}if(e.posY<=0)e.posY=canvas1.height-e.height-1;else if(e.posY>=canvas1.height-e.height)e.posY=1;else switch(t){case-1:e.posY-=1,e.div.classList.remove("dir270","dir90","dir0","dir180"),e.div.classList.add("dir0");break;case 0:e.posY=e.posY;break;case 1:e.posY+=1,e.div.classList.remove("dir270","dir90","dir0","dir180"),e.div.classList.add("dir180")}e.div.style.left=e.posX+"px",e.div.style.top=e.posY+"px"},10)}},i=0;i<catsTotal;i++){var cat1=new cat(50,50,10);cats.push(cat1),cat1.create(),cat1.direction()}scoreTimeout=!0,leftMov=!0,upMov=!0,rightMov=!0,downMov=!0;var mouse=function(s,t,e,i,o,h,a){this.width=s,this.height=t,this.posX=e,this.posY=i,this.speed=o,this.dirX=0,this.dirY=0,this.div,this.create=function(){this.div=document.createElement("div"),this.div.classList.add("mouse","dir90"),this.div.style.width=this.width+"px",this.div.style.height=this.height+"px",this.div.style.top=this.posY+"px",this.div.style.left=this.posX+"px",container.querySelector(".canvas").appendChild(this.div)},this.move=function(){var s,t,e,i,o,h=this;document.addEventListener("keydown",function(a){switch(a.keyCode){case 37:s=!0,h.dirX=-h.speed,h.div.className="mouse dir270";break;case 38:t=!0,h.dirY=-h.speed,h.div.className="mouse dir0";break;case 39:e=!0,h.dirX=h.speed,h.div.className="mouse dir90";break;case 40:i=!0,h.dirY=h.speed,h.div.className="mouse dir180"}0==o&&(o=!0,loop=setInterval(function(){h.posX<=0?h.posX=1:h.posX>=canvas1.width-h.width?h.posX=canvas1.width-h.width-1:h.posX+=h.dirX,h.posY<=0?h.posY=1:h.posY>=canvas1.height-h.height?h.posY=canvas1.height-h.height-1:h.posY+=h.dirY;for(var o=0;o<=obstacles.length-1;o++)if(h.posX>=obstacles[o].posX-obstacles[o].width/1.5&&h.posX<=obstacles[o].posX+obstacles[o].width/1.5&&h.posY>=obstacles[o].posY-obstacles[o].height/1.5&&h.posY<=obstacles[o].posY+obstacles[o].height/1.5)switch(!0){case s:h.posX=obstacles[o].posX+h.width;break;case t:h.posY=obstacles[o].posY+h.height;break;case e:h.posX=obstacles[o].posX-h.width;break;case i:h.posY=obstacles[o].posY-h.height}for(var o=0;o<=cheeses.length-1;o++)h.posY-h.height/2<cheeses[o].posY&&h.posY+h.height/2>cheeses[o].posY&&h.posX-h.width/2<cheeses[o].posX&&h.posX+h.width/2>cheeses[o].posX&&(cheeses[o].update(),score+=1,scoreDiv.innerHTML=score);for(var o=0;o<=rottenCheeses.length-1;o++)if(h.posY-h.height<rottenCheeses[o].posY&&h.posY+h.height>rottenCheeses[o].posY&&h.posX-h.width<rottenCheeses[o].posX&&h.posX+h.width>rottenCheeses[o].posX){rottenCheeses[o].update(),score<=0?score=0:score-=1,scoreDiv.innerHTML=score;var d=new blackOut;d.create(),setTimeout(function(){d.remove()},1e3)}for(var o=0;o<=wines.length-1;o++)h.posY-h.height<wines[o].posY&&h.posY+h.height>wines[o].posY&&h.posX-h.width<wines[o].posX&&h.posX+h.width>wines[o].posX&&(wines[o].update(),score<=0?score=0:score-=1,scoreDiv.innerHTML=score,setInterval(function(){switch(!0){case s:a.keyCode=39;break;case t:a.keyCode=40;break;case e:a.keyCode=37;break;case i:a.keyCode=38}},5e3),setTimeout(function(){clearInterval()},5e3));for(var o=0;o<=cats.length-1;o++)h.posY-h.height/2<cats[o].posY&&h.posY+h.height/2>cats[o].posY&&h.posX-h.width/2<cats[o].posX&&h.posX+h.width/2>cats[o].posX&&location.reload();h.div.style.left=h.posX+"px",h.div.style.top=h.posY+"px"},10))},!1),document.addEventListener("keyup",function(a){s=!1,t=!1,e=!1,i=!1,o=!1,h.dirX=0,h.dirY=0,clearInterval(loop)},!1)}},mouse1=new mouse(50,50,20,200,6,0,0);mouse1.create(),mouse1.move();
//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImNhdC5qcyIsImNhbnZhcy5qcyIsIm9ic3RhY2xlLmpzIiwiY2hlZXNlLmpzIiwicm90dGVuQ2hlZXNlLmpzIiwid2luZS5qcyIsIm1vdXNlLmpzIl0sIm5hbWVzIjpbImNob29zZVBvcyIsIm51bWJlciIsIk1hdGgiLCJyb3VuZCIsInJhbmRvbSIsInJhbmRvbVgiLCJhYnMiLCJmbG9vciIsImNhbnZhczEiLCJ3aWR0aCIsInJhbmRvbVkiLCJoZWlnaHQiLCJzcGVlZCIsImJvZHkiLCJkb2N1bWVudCIsInF1ZXJ5U2VsZWN0b3IiLCJjb250YWluZXIiLCJzY29yZURpdiIsInNjb3JlIiwiY2FudmFzIiwidGhpcyIsImRpdiIsInBvc2l0aW9ucyIsIkFycmF5IiwiY3JlYXRlIiwiY3JlYXRlRWxlbWVudCIsInN0eWxlIiwiY2xhc3NMaXN0IiwiYWRkIiwiYXBwZW5kQ2hpbGQiLCJibGFja091dCIsInJlbW92ZSIsIm9ic3RhY2xlcyIsIm9ic3RhY2xlc1RvdGFsIiwib2JzdGFjbGUiLCJwb3NYIiwicG9zWSIsInB1c2giLCJ0b3AiLCJsZWZ0IiwiaSIsIm9ic3RhY2xlMSIsImNoZWVzZXMiLCJjaGVlc2VzVG90YWwiLCJjaGVlc2UiLCJjaGVlc2VQb3NpdGlvbnMiLCJ2ZXJpZmljYXRpb24iLCJzYW1lUG9zIiwibGVuZ3RoIiwidXBkYXRlIiwiY2hlZXNlMSIsInJvdHRlbkNoZWVzZXMiLCJyb3R0ZW5Ub3RhbCIsInJvdHRlbkNoZWVzZSIsImRpclgiLCJyb3R0ZW5DaGVlc2UxIiwid2luZXMiLCJ3aW5lc1RvdGFsIiwid2luZSIsIndpbmUxIiwiY2F0cyIsImNhdHNUb3RhbCIsImNhdCIsImRpcmVjdGlvbiIsImRpclkiLCJfdGhpcyIsInBvc2l0aW9uIiwic2V0SW50ZXJ2YWwiLCJuZXdQb3MiLCJtb3ZlIiwiY2F0MSIsInNjb3JlVGltZW91dCIsImxlZnRNb3YiLCJ1cE1vdiIsInJpZ2h0TW92IiwiZG93bk1vdiIsIm1vdXNlIiwibGVmdFByZXNzZWQiLCJ1cFByZXNzZWQiLCJyaWdodFByZXNzZWQiLCJkb3duUHJlc3NlZCIsImlzUHJlc3NlZCIsImFkZEV2ZW50TGlzdGVuZXIiLCJlIiwia2V5Q29kZSIsImNsYXNzTmFtZSIsImxvb3AiLCJpbm5lckhUTUwiLCJibGFja091dDEiLCJzZXRUaW1lb3V0IiwiY2xlYXJJbnRlcnZhbCIsImxvY2F0aW9uIiwicmVsb2FkIiwiZXZlbnQiLCJtb3VzZTEiXSwibWFwcGluZ3MiOiJBQWlHQSxRQUFBQSxXQUFBQyxHQUFBLE1BQUFDLE1BQUFDLE1BQUFELEtBQUFFLFNBQUFILEdDaEdBLFFBQUFJLFdBQUEsTUFBQUgsTUFBQUksSUFBQUosS0FBQUssTUFBQUwsS0FBQUUsU0FBQUksUUFBQUMsTUFBQSxLQUNBLFFBQUFDLFdBQUEsTUFBQVIsTUFBQUksSUFBQUosS0FBQUssTUFBQUwsS0FBQUUsU0FBQUksUUFBQUcsT0FBQSxLQUNBLFFBQUFQLFFBQUFRLEdBQUEsTUFBQVYsTUFBQUksSUFBQUosS0FBQUUsU0FBQVEsR0FBQSxFQUNBLFFBQUFSLFFBQUFILEdBQUEsTUFBQUMsTUFBQUksSUFBQUosS0FBQUUsU0FBQUgsR0FKQSxHQUFBWSxNQUFBQyxTQUFBQyxjQUFBLFFBQ0FDLFVBQUFGLFNBQUFDLGNBQUEsY0FDQUUsU0FBQUQsVUFBQUQsY0FBQSxpQkFDQUcsTUFBQSxFQUdBQyxPQUFBLFNBQUFWLEVBQUFFLEdBR0FTLEtBQUFYLE1BQUFBLEVBQ0FXLEtBQUFULE9BQUFBLEVBQ0FTLEtBQUFDLElBQ0FELEtBQUFFLFVBQUEsR0FBQUMsT0FHQUgsS0FBQUksT0FBQSxXQUVBSixLQUFBQyxJQUFBUCxTQUFBVyxjQUFBLE9BQ0FMLEtBQUFDLElBQUFLLE1BQUFqQixNQUFBVyxLQUFBWCxNQUFBLEtBQ0FXLEtBQUFDLElBQUFLLE1BQUFmLE9BQUFTLEtBQUFULE9BQUEsS0FDQVMsS0FBQUMsSUFBQU0sVUFBQUMsSUFBQSxVQUNBWixVQUFBYSxZQUFBVCxLQUFBQyxPQUlBYixRQUFBLEdBQUFXLFFBQUEsS0FBQSxJ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QUFBLEVBQUFtRCxLQUFBcEIsR0FBQUwsTUFHQXdELFNBQUFDLFFBS0EzQixHQUFBNUMsSUFBQUssTUFBQWEsS0FBQTBCLEVBQUE5QixLQUFBLEtBQ0E4QixFQUFBNUMsSUFBQUssTUFBQVksSUFBQTJCLEVBQUE3QixLQUFBLE1BRUEsT0FFQSxHQUVBdEIsU0FBQW9FLGlCQUFBLFFBQUEsU0FBQVcsR0FFQWhCLEdBQUEsRUFDQUMsR0FBQSxFQUNBQyxHQUFBLEVBQ0FDLEdBQUEsRUFDQUMsR0FBQSxFQUNBaEIsRUFBQVgsS0FBQSxFQUNBVyxFQUFBRCxLQUFBLEVBQ0EwQixjQUFBSixRQUNBLEtBS0FRLE9BQUEsR0FBQWxCLE9BQUEsR0FBQSxHQUFBLEdBQUEsSUFBQSxFQUFBLEVBQUEsRUFDQWtCLFFBQUF0RSxTQUNBc0UsT0FBQXpCIiwiZmlsZSI6InNjcmlwdC5qcyIsInNvdXJjZXNDb250ZW50IjpbInZhciBjYXRzID0gW10sXG4gICAgY2F0c1RvdGFsID0gNjtcblxuLy8gQ3JlYXRlIGNoZWVzZSBvYmplY3RcbnZhciBjYXQgPSBmdW5jdGlvbih3aWR0aCwgaGVpZ2h0LCBzcGVlZClcbntcbiAgICAvLyBQcm9wZXJ0aWVzXG4gICAgdGhpcy53aWR0aCA9IHdpZHRoO1xuICAgIHRoaXMuaGVpZ2h0ID0gaGVpZ2h0O1xuICAgIHRoaXMucG9zWCA9IHJhbmRvbVgoKTtcbiAgICB0aGlzLnBvc1kgPSByYW5kb21ZKCk7XG5cbiAgICB0aGlzLmRpdjtcblxuICAgIC8vIE1ldGhvZHNcbiAgICB0aGlzLmNyZWF0ZSA9IGZ1bmN0aW9uKClcbiAgICB7XG4gICAgICAgIHRoaXMuZGl2ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnZGl2Jyk7XG4gICAgICAgIHRoaXMuZGl2LmNsYXNzTGlzdC5hZGQoJ2NhdCcpO1xuICAgICAgICB0aGlzLmRpdi5zdHlsZS53aWR0aCA9IHRoaXMud2lkdGggKyAncHgnO1xuICAgICAgICB0aGlzLmRpdi5zdHlsZS5oZWlnaHQgPSB0aGlzLmhlaWdodCArICdweCc7XG4gICAgICAgIHRoaXMuZGl2LnN0eWxlLnRvcCA9IHRoaXMucG9zWSArICdweCc7XG4gICAgICAgIHRoaXMuZGl2LnN0eWxlLmxlZnQgPSB0aGlzLnBvc1ggKyAncHgnO1xuXG4gICAgICAgIHZhciBjYW52YXMgPSBjb250YWluZXIucXVlcnlTZWxlY3RvcignLmNhbnZhcycpO1xuICAgICAgICBjYW52YXMuYXBwZW5kQ2hpbGQodGhpcy5kaXYpO1xuICAgIH1cbiAgICB0aGlzLmRpcmVjdGlvbiA9IGZ1bmN0aW9uKClcbiAgICB7XG4gICAgICAgIHZhciBfdGhpcyA9IHRoaXM7XG4gICAgICAgIHZhciBkaXJYLCBkaXJZO1xuICAgICAgICBwb3NpdGlvbiA9IHNldEludGVydmFsKGZ1bmN0aW9uKClcbiAgICAgICAge1xuICAgICAgICAgICAgdmFyIG5ld1BvcyA9IFtcbiAgICAgICAgICAgICAgICBbLTEsIDAsIDFdLFxuICAgICAgICAgICAgICAgIFstMSwgMCwgMV1cbiAgICAgICAgICAgIF1cbiAgICAgICAgICAgIGRpclggPSBuZXdQb3NbMF1bIGNob29zZVBvcyhuZXdQb3MubGVuZ3RoKSBdO1xuICAgICAgICAgICAgZGlyWSA9IG5ld1Bvc1sxXVsgY2hvb3NlUG9zKG5ld1Bvcy5sZW5ndGgpIF07XG4gICAgICAgIH0sMjAwMClcbiAgICAgICAgbW92ZSA9IHNldEludGVydmFsKGZ1bmN0aW9uKClcbiAgICAgICAge1xuICAgICAgICAgICAgaWYgKF90aGlzLnBvc1ggPD0gMClcbiAgICAgICAgICAgICAgICBfdGhpcy5wb3NYID0gY2FudmFzMS53aWR0aCAtIF90aGlzLndpZHRoIC0xIDtcbiAgICAgICAgICAgIGVsc2UgaWYgKF90aGlzLnBvc1ggPj0gY2FudmFzMS53aWR0aC1fdGhpcy53aWR0aClcbiAgICAgICAgICAgICAgICBfdGhpcy5wb3NYID0gMTtcbiAgICAgICAgICAgIGVsc2VcbiAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICBzd2l0Y2ggKGRpclgpXG4gICAgICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgICAgICBjYXNlIC0xOlxuICAgICAgICAgICAgICAgICAgICAgICAgX3RoaXMucG9zWCAtPSAxO1xuICAgICAgICAgICAgICAgICAgICAgICAgX3RoaXMuZGl2LmNsYXNzTGlzdC5yZW1vdmUoJ2RpcjI3MCcsICdkaXI5MCcsICdkaXIwJywgJ2RpcjE4MCcpO1xuICAgICAgICAgICAgICAgICAgICAgICAgX3RoaXMuZGl2LmNsYXNzTGlzdC5hZGQoJ2RpcjI3MCcpO1xuICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgICAgIGNhc2UgMDpcbiAgICAgICAgICAgICAgICAgICAgICAgIF90aGlzLnBvc1ggPSBfdGhpcy5wb3NYO1xuICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgICAgIGNhc2UgMTpcbiAgICAgICAgICAgICAgICAgICAgICAgIF90aGlzLnBvc1ggKz0gMTtcbiAgICAgICAgICAgICAgICAgICAgICAgIF90aGlzLmRpdi5jbGFzc0xpc3QucmVtb3ZlKCdkaXIyNzAnLCAnZGlyOTAnLCAnZGlyMCcsICdkaXIxODAnKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIF90aGlzLmRpdi5jbGFzc0xpc3QuYWRkKCdkaXI5MCcpO1xuICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgICAgIGRlZmF1bHQ6XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICBpZiAoX3RoaXMucG9zWSA8PSAwKVxuICAgICAgICAgICAgICAgIF90aGlzLnBvc1kgPSBjYW52YXMxLmhlaWdodC0gX3RoaXMuaGVpZ2h0IC0gMTtcbiAgICAgICAgICAgIGVsc2UgaWYgKF90aGlzLnBvc1kgPj0gY2FudmFzMS5oZWlnaHQtX3RoaXMuaGVpZ2h0KVxuICAgICAgICAgICAgICAgIF90aGlzLnBvc1kgPSAxO1xuICAgICAgICAgICAgZWxzZVxuICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgIHN3aXRjaCAoZGlyWSlcbiAgICAgICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgICAgIGNhc2UgLTE6XG4gICAgICAgICAgICAgICAgICAgICAgICBfdGhpcy5wb3NZIC09IDE7XG4gICAgICAgICAgICAgICAgICAgICAgICBfdGhpcy5kaXYuY2xhc3NMaXN0LnJlbW92ZSgnZGlyMjcwJywgJ2RpcjkwJywgJ2RpcjAnLCAnZGlyMTgwJyk7XG4gICAgICAgICAgICAgICAgICAgICAgICBfdGhpcy5kaXYuY2xhc3NMaXN0LmFkZCgnZGlyMCcpO1xuICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgICAgIGNhc2UgMDpcbiAgICAgICAgICAgICAgICAgICAgICAgIF90aGlzLnBvc1kgPSBfdGhpcy5wb3NZO1xuICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgICAgIGNhc2UgMTpcbiAgICAgICAgICAgICAgICAgICAgICAgIF90aGlzLnBvc1kgKz0gMTtcbiAgICAgICAgICAgICAgICAgICAgICAgIF90aGlzLmRpdi5jbGFzc0xpc3QucmVtb3ZlKCdkaXIyNzAnLCAnZGlyOTAnLCAnZGlyMCcsICdkaXIxODAnKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIF90aGlzLmRpdi5jbGFzc0xpc3QuYWRkKCdkaXIxODAnKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgICAgICBkZWZhdWx0OlxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgX3RoaXMuZGl2LnN0eWxlLmxlZnQgPSBfdGhpcy5wb3NYICsgJ3B4JztcbiAgICAgICAgICAgIF90aGlzLmRpdi5zdHlsZS50b3AgPSBfdGhpcy5wb3NZICsgJ3B4JztcbiAgICAgICAgfSwgMTApXG4gICAgfVxufVxuZnVuY3Rpb24gY2hvb3NlUG9zKG51bWJlcikgeyByZXR1cm4gTWF0aC5yb3VuZChNYXRoLnJhbmRvbSgpICogbnVtYmVyKSB9XG5cbmZvciAodmFyIGkgPSAwOyBpIDwgY2F0c1RvdGFsOyBpKyspXG57XG4gICAgdmFyIGNhdDEgPSBuZXcgY2F0ICggNTAsIDUwLCAxMCApO1xuICAgIGNhdHMucHVzaChjYXQxKTtcbiAgICBjYXQxLmNyZWF0ZSgpO1xuICAgIGNhdDEuZGlyZWN0aW9uKCk7XG59XG4iLCJ2YXIgYm9keSA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJ2JvZHknKTtcbnZhciBjb250YWluZXIgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcuY29udGFpbmVyJyk7XG52YXIgc2NvcmVEaXYgPSBjb250YWluZXIucXVlcnlTZWxlY3RvcignLnNjb3JlID4gc3BhbicpLFxuICAgIHNjb3JlID0gMDtcblxuLy8gQ3JlYXRlIGNhbnZhcyBvYmplY3RcbnZhciBjYW52YXMgPSBmdW5jdGlvbih3aWR0aCwgaGVpZ2h0KVxue1xuICAgIC8vIFByb3BlcnRpZXNcbiAgICB0aGlzLndpZHRoID0gd2lkdGg7XG4gICAgdGhpcy5oZWlnaHQgPSBoZWlnaHQ7XG4gICAgdGhpcy5kaXY7XG4gICAgdGhpcy5wb3NpdGlvbnMgPSBuZXcgQXJyYXkoKTtcblxuICAgIC8vIE1ldGhvZHNcbiAgICB0aGlzLmNyZWF0ZSA9IGZ1bmN0aW9uKClcbiAgICB7XG4gICAgICAgIHRoaXMuZGl2ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnZGl2Jyk7XG4gICAgICAgIHRoaXMuZGl2LnN0eWxlLndpZHRoID0gdGhpcy53aWR0aCArICdweCc7XG4gICAgICAgIHRoaXMuZGl2LnN0eWxlLmhlaWdodCA9IHRoaXMuaGVpZ2h0ICsgJ3B4JztcbiAgICAgICAgdGhpcy5kaXYuY2xhc3NMaXN0LmFkZCgnY2FudmFzJyk7XG4gICAgICAgIGNvbnRhaW5lci5hcHBlbmRDaGlsZCh0aGlzLmRpdik7XG4gICAgfVxufVxuLy8gTmV3IGNhbnZhc1xudmFyIGNhbnZhczEgPSBuZXcgY2FudmFzICgxMjAwLCA1MDApO1xuY2FudmFzMS5jcmVhdGUoKTtcblxuLy8gQmxhY2tvdXRcbnZhciBibGFja091dCA9IGZ1bmN0aW9uKClcbntcbiAgICB0aGlzLmRpdjtcblxuICAgIHRoaXMuY3JlYXRlID0gZnVuY3Rpb24oKVxuICAgIHtcbiAgICAgICAgdGhpcy5kaXYgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkaXYnKTtcbiAgICAgICAgdGhpcy5kaXYuY2xhc3NMaXN0LmFkZCgnYmxhY2stb3V0Jyk7XG4gICAgICAgIGJvZHkuYXBwZW5kQ2hpbGQodGhpcy5kaXYpO1xuICAgIH1cbiAgICB0aGlzLnJlbW92ZSA9IGZ1bmN0aW9uKClcbiAgICB7XG4gICAgICAgIHRoaXMuZGl2LnJlbW92ZSgpO1xuICAgIH1cbn1cbiIsInZhciBvYnN0YWNsZXMgPSBbXSxcbiAgICBvYnN0YWNsZXNUb3RhbCA9IDEwO1xuXG52YXIgb2JzdGFjbGUgPSBmdW5jdGlvbih3aWR0aCwgaGVpZ2h0LCBwb3NYLCBwb3NZKVxue1xuICAgIHRoaXMuZGl2O1xuICAgIHRoaXMud2lkdGggPSB3aWR0aDtcbiAgICB0aGlzLmhlaWdodCA9IGhlaWdodDtcbiAgICB0aGlzLnBvc1ggPSBwb3NYO1xuICAgIHRoaXMucG9zWSA9IHBvc1k7XG5cbiAgICB0aGlzLmNyZWF0ZSA9IGZ1bmN0aW9uKClcbiAgICB7XG4gICAgICAgIG9ic3RhY2xlcy5wdXNoKHRoaXMpO1xuXG4gICAgICAgIHRoaXMuZGl2ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnZGl2Jyk7XG4gICAgICAgIHRoaXMuZGl2LmNsYXNzTGlzdC5hZGQoJ29ic3RhY2xlJyk7XG4gICAgICAgIHRoaXMuZGl2LnN0eWxlLndpZHRoID0gdGhpcy53aWR0aCArICdweCc7XG4gICAgICAgIHRoaXMuZGl2LnN0eWxlLmhlaWdodCA9IHRoaXMuaGVpZ2h0ICsgJ3B4JztcbiAgICAgICAgdGhpcy5kaXYuc3R5bGUudG9wID0gdGhpcy5wb3NZICsgJ3B4JztcbiAgICAgICAgdGhpcy5kaXYuc3R5bGUubGVmdCA9IHRoaXMucG9zWCArICdweCc7XG5cbiAgICAgICAgdmFyIGNhbnZhcyA9IGNvbnRhaW5lci5xdWVyeVNlbGVjdG9yKCcuY2FudmFzJyk7XG4gICAgICAgIGNhbnZhcy5hcHBlbmRDaGlsZCh0aGlzLmRpdik7XG4gICAgfVxufVxuXG5mb3IgKHZhciBpID0gMDsgaSA8IG9ic3RhY2xlc1RvdGFsOyBpKyspIHtcbiAgICB2YXIgb2JzdGFjbGUxID0gbmV3IG9ic3RhY2xlICg1MCwgNTAsIHJhbmRvbVgoKSwgcmFuZG9tWSgpICk7XG4gICAgb2JzdGFjbGVzLnB1c2gob2JzdGFjbGUxKTtcbiAgICBvYnN0YWNsZTEuY3JlYXRlKCk7XG59XG4iLCJ2YXIgY2hlZXNlcyA9IFtdLFxuICAgIGNoZWVzZXNUb3RhbCA9IDU7XG5cbi8vIENyZWF0ZSBjaGVlc2Ugb2JqZWN0XG52YXIgY2hlZXNlID0gZnVuY3Rpb24od2lkdGgsIGhlaWdodCwgcG9zWCwgcG9zWSlcbntcbiAgICAvLyBQcm9wZXJ0aWVzXG4gICAgdGhpcy5kaXY7XG4gICAgdGhpcy53aWR0aCA9IHdpZHRoO1xuICAgIHRoaXMuaGVpZ2h0ID0gaGVpZ2h0O1xuXG4gICAgdGhpcy5wb3NYID0gcG9zWDtcbiAgICB0aGlzLnBvc1kgPSBwb3NZO1xuXG4gICAgY2hlZXNlUG9zaXRpb25zID0gW3RoaXMucG9zWCwgdGhpcy5wb3NZLCB0aGlzLndpZHRoLCB0aGlzLmhlaWdodF07XG5cbiAgICAvLyBNZXRob2RzXG4gICAgdGhpcy52ZXJpZmljYXRpb24gPSBmdW5jdGlvbigpXG4gICAge1xuICAgICAgICBkb1xuICAgICAgICB7XG4gICAgICAgICAgICB2YXIgc2FtZVBvcyA9IGZhbHNlO1xuICAgICAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPD0gY2FudmFzMS5wb3NpdGlvbnMubGVuZ3RoIC0xIDsgaSsrKVxuICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgIGlmXG4gICAgICAgICAgICAgICAgKFxuICAgICAgICAgICAgICAgICAgICBjYW52YXMxLnBvc2l0aW9uc1tpXVswXSA9PSB0aGlzLnBvc1ggfHwgY2FudmFzMS5wb3NpdGlvbnNbaV1bMV0gPT0gdGhpcy5wb3NZXG4gICAgICAgICAgICAgICAgKVxuICAgICAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5wb3NYID0gcmFuZG9tWCgpO1xuICAgICAgICAgICAgICAgICAgICB0aGlzLnBvc1kgPSByYW5kb21ZKCk7XG4gICAgICAgICAgICAgICAgICAgIHNhbWVQb3MgPSB0cnVlO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBlbHNlXG4gICAgICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgICAgICBzYW1lUG9zID0gZmFsc2U7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICB9IHdoaWxlIChzYW1lUG9zID09IHRydWUpO1xuICAgIH1cbiAgICB0aGlzLmNyZWF0ZSA9IGZ1bmN0aW9uKClcbiAgICB7XG4gICAgICAgIHRoaXMudmVyaWZpY2F0aW9uKCk7XG4gICAgICAgIHRoaXMuZGl2ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnZGl2Jyk7XG4gICAgICAgIHRoaXMuZGl2LmNsYXNzTGlzdC5hZGQoJ2NoZWVzZScpO1xuICAgICAgICB0aGlzLmRpdi5zdHlsZS53aWR0aCA9IHRoaXMud2lkdGggKyAncHgnO1xuICAgICAgICB0aGlzLmRpdi5zdHlsZS5oZWlnaHQgPSB0aGlzLmhlaWdodCArICdweCc7XG4gICAgICAgIHRoaXMuZGl2LnN0eWxlLnRvcCA9IHRoaXMucG9zWSArICdweCc7XG4gICAgICAgIHRoaXMuZGl2LnN0eWxlLmxlZnQgPSB0aGlzLnBvc1ggKyAncHgnO1xuXG4gICAgICAgIHZhciBjYW52YXMgPSBjb250YWluZXIucXVlcnlTZWxlY3RvcignLmNhbnZhcycpO1xuICAgICAgICBjYW52YXMuYXBwZW5kQ2hpbGQodGhpcy5kaXYpO1xuXG4gICAgICAgIGNhbnZhczEucG9zaXRpb25zLnB1c2goY2hlZXNlUG9zaXRpb25zKTtcbiAgICB9XG4gICAgdGhpcy51cGRhdGUgPSBmdW5jdGlvbigpXG4gICAge1xuICAgICAgICB0aGlzLnBvc1ggPSByYW5kb21YKCk7XG4gICAgICAgIHRoaXMucG9zWSA9IHJhbmRvbVkoKTtcblxuICAgICAgICB0aGlzLmRpdi5zdHlsZS50b3AgPSB0aGlzLnBvc1kgKyAncHgnO1xuICAgICAgICB0aGlzLmRpdi5zdHlsZS5sZWZ0ID0gdGhpcy5wb3NYICsgJ3B4JztcbiAgICB9XG59XG5cbi8vIENyZWF0ZSAxMCBjaGVlc2VzXG5mb3IgKHZhciBpID0gMDsgaSA8IDIwOyBpKyspXG57XG4gICAgdmFyIGNoZWVzZTEgPSBuZXcgY2hlZXNlICggNTAsIDUwLCAyMCwgMjAgKTtcbiAgICBjaGVlc2UxLmNyZWF0ZSgpO1xuICAgIGNoZWVzZXMucHVzaChjaGVlc2UxKTtcbn1cbiIsInZhciByb3R0ZW5DaGVlc2VzID0gW10sXG4gICAgcm90dGVuVG90YWwgPSAzO1xuXG4vLyBDcmVhdGUgY2hlZXNlIG9iamVjdFxudmFyIHJvdHRlbkNoZWVzZSA9IGZ1bmN0aW9uKHdpZHRoLCBoZWlnaHQsIHBvc1gsIHBvc1kpXG57XG4gICAgLy8gUHJvcGVydGllc1xuICAgIHRoaXMud2lkdGggPSB3aWR0aDtcbiAgICB0aGlzLmhlaWdodCA9IGhlaWdodDtcbiAgICB0aGlzLmRpclg7XG4gICAgdGhpcy5wb3NYID0gcG9zWDtcbiAgICB0aGlzLnBvc1kgPSBwb3NZO1xuICAgIHRoaXMuZGl2O1xuXG4gICAgLy8gTWV0aG9kc1xuICAgIHRoaXMuY3JlYXRlID0gZnVuY3Rpb24oKVxuICAgIHtcbiAgICAgICAgdGhpcy5kaXYgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkaXYnKTtcbiAgICAgICAgdGhpcy5kaXYuY2xhc3NMaXN0LmFkZCgncm90dGVuLWNoZWVzZScpO1xuICAgICAgICB0aGlzLmRpdi5zdHlsZS53aWR0aCA9IHRoaXMud2lkdGggKyAncHgnO1xuICAgICAgICB0aGlzLmRpdi5zdHlsZS5oZWlnaHQgPSB0aGlzLmhlaWdodCArICdweCc7XG4gICAgICAgIHRoaXMuZGl2LnN0eWxlLnRvcCA9IHRoaXMucG9zWSArICdweCc7XG4gICAgICAgIHRoaXMuZGl2LnN0eWxlLmxlZnQgPSB0aGlzLnBvc1ggKyAncHgnO1xuXG4gICAgICAgIHZhciBjYW52YXMgPSBjb250YWluZXIucXVlcnlTZWxlY3RvcignLmNhbnZhcycpO1xuICAgICAgICBjYW52YXMuYXBwZW5kQ2hpbGQodGhpcy5kaXYpO1xuICAgIH1cbiAgICB0aGlzLnVwZGF0ZSA9IGZ1bmN0aW9uKClcbiAgICB7XG4gICAgICAgIHRoaXMucG9zWCA9IHJhbmRvbVgoKTtcbiAgICAgICAgdGhpcy5wb3NZID0gcmFuZG9tWSgpO1xuXG4gICAgICAgIHRoaXMuZGl2LnN0eWxlLnRvcCA9IHRoaXMucG9zWSArICdweCc7XG4gICAgICAgIHRoaXMuZGl2LnN0eWxlLmxlZnQgPSB0aGlzLnBvc1ggKyAncHgnO1xuICAgIH1cbn1cblxuZm9yICh2YXIgaSA9IDA7IGkgPCByb3R0ZW5Ub3RhbDsgaSsrKVxue1xuICAgIHZhciByb3R0ZW5DaGVlc2UxID0gbmV3IHJvdHRlbkNoZWVzZSAoIDUwLCA1MCwgcmFuZG9tWCgpLCByYW5kb21ZKCkgKTtcbiAgICByb3R0ZW5DaGVlc2VzLnB1c2gocm90dGVuQ2hlZXNlMSk7XG4gICAgcm90dGVuQ2hlZXNlMS5jcmVhdGUoKTtcbn1cbiIsInZhciB3aW5lcyA9IFtdLFxuICAgIHdpbmVzVG90YWwgPSA3O1xuXG4vLyBDcmVhdGUgY2hlZXNlIG9iamVjdFxudmFyIHdpbmUgPSBmdW5jdGlvbih3aWR0aCwgaGVpZ2h0LCBwb3NYLCBwb3NZKVxue1xuICAgIC8vIFByb3BlcnRpZXNcbiAgICB0aGlzLndpZHRoID0gd2lkdGg7XG4gICAgdGhpcy5oZWlnaHQgPSBoZWlnaHQ7XG4gICAgdGhpcy5kaXJYO1xuICAgIHRoaXMucG9zWCA9IHBvc1g7XG4gICAgdGhpcy5wb3NZID0gcG9zWTtcbiAgICB0aGlzLmRpdjtcblxuICAgIC8vIE1ldGhvZHNcbiAgICB0aGlzLmNyZWF0ZSA9IGZ1bmN0aW9uKClcbiAgICB7XG4gICAgICAgIHRoaXMuZGl2ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnZGl2Jyk7XG4gICAgICAgIHRoaXMuZGl2LmNsYXNzTGlzdC5hZGQoJ3dpbmUnKTtcbiAgICAgICAgdGhpcy5kaXYuc3R5bGUud2lkdGggPSB0aGlzLndpZHRoICsgJ3B4JztcbiAgICAgICAgdGhpcy5kaXYuc3R5bGUuaGVpZ2h0ID0gdGhpcy5oZWlnaHQgKyAncHgnO1xuICAgICAgICB0aGlzLmRpdi5zdHlsZS50b3AgPSB0aGlzLnBvc1kgKyAncHgnO1xuICAgICAgICB0aGlzLmRpdi5zdHlsZS5sZWZ0ID0gdGhpcy5wb3NYICsgJ3B4JztcblxuICAgICAgICB2YXIgY2FudmFzID0gY29udGFpbmVyLnF1ZXJ5U2VsZWN0b3IoJy5jYW52YXMnKTtcbiAgICAgICAgY2FudmFzLmFwcGVuZENoaWxkKHRoaXMuZGl2KTtcbiAgICB9XG4gICAgdGhpcy51cGRhdGUgPSBmdW5jdGlvbigpXG4gICAge1xuICAgICAgICB0aGlzLnBvc1ggPSByYW5kb21YKCk7XG4gICAgICAgIHRoaXMucG9zWSA9IHJhbmRvbVkoKTtcblxuICAgICAgICB0aGlzLmRpdi5zdHlsZS50b3AgPSB0aGlzLnBvc1kgKyAncHgnO1xuICAgICAgICB0aGlzLmRpdi5zdHlsZS5sZWZ0ID0gdGhpcy5wb3NYICsgJ3B4JztcbiAgICB9XG59XG5cbi8vIENyZWF0ZSA3IGdsYXNzZXMgb2Ygd2luZVxuZm9yICh2YXIgaSA9IDA7IGkgPCB3aW5lc1RvdGFsOyBpKyspXG57XG4gICAgdmFyIHdpbmUxID0gbmV3IHdpbmUgKCA1MCwgNTAsIHJhbmRvbVgoKSwgcmFuZG9tWSgpICk7XG4gICAgd2luZXMucHVzaCh3aW5lMSk7XG4gICAgd2luZTEuY3JlYXRlKCk7XG59XG4iLCIvLyBDcmVhdGUgbW91c2Ugb2JqZWN0XG5zY29yZVRpbWVvdXQgPSB0cnVlO1xubGVmdE1vdiA9IHRydWU7XG51cE1vdiA9IHRydWU7XG5yaWdodE1vdiA9IHRydWU7XG5kb3duTW92ID0gdHJ1ZTtcblxudmFyIG1vdXNlID0gZnVuY3Rpb24od2lkdGgsIGhlaWdodCwgcG9zWCwgcG9zWSwgc3BlZWQsIGRpclgsIGRpclkpXG57XG4gICAgLy8gUHJvcHJpZXRpZXNcbiAgICB0aGlzLndpZHRoID0gd2lkdGg7XG4gICAgdGhpcy5oZWlnaHQgPSBoZWlnaHQ7XG4gICAgdGhpcy5wb3NYID0gcG9zWDtcbiAgICB0aGlzLnBvc1kgPSBwb3NZO1xuICAgIHRoaXMuc3BlZWQgPSBzcGVlZDtcbiAgICB0aGlzLmRpclggPSAwO1xuICAgIHRoaXMuZGlyWSA9IDA7XG5cbiAgICB0aGlzLmRpdjtcblxuICAgIC8vIE1ldGhvZHNcbiAgICB0aGlzLmNyZWF0ZSA9IGZ1bmN0aW9uKClcbiAgICB7XG4gICAgICAgIHRoaXMuZGl2ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnZGl2Jyk7XG4gICAgICAgIHRoaXMuZGl2LmNsYXNzTGlzdC5hZGQoJ21vdXNlJywgJ2RpcjkwJyk7XG4gICAgICAgIHRoaXMuZGl2LnN0eWxlLndpZHRoID0gdGhpcy53aWR0aCArICdweCc7XG4gICAgICAgIHRoaXMuZGl2LnN0eWxlLmhlaWdodCA9IHRoaXMuaGVpZ2h0ICsgJ3B4JztcbiAgICAgICAgdGhpcy5kaXYuc3R5bGUudG9wID0gdGhpcy5wb3NZICsgJ3B4JztcbiAgICAgICAgdGhpcy5kaXYuc3R5bGUubGVmdCA9IHRoaXMucG9zWCArICdweCc7XG5cbiAgICAgICAgdmFyIGNhbnZhcyA9IGNvbnRhaW5lci5xdWVyeVNlbGVjdG9yKCcuY2FudmFzJyk7XG4gICAgICAgIGNhbnZhcy5hcHBlbmRDaGlsZCh0aGlzLmRpdik7XG4gICAgfVxuXG4gICAgdGhpcy5tb3ZlID0gZnVuY3Rpb24oKVxuICAgIHtcbiAgICAgICAgdmFyIF90aGlzID0gdGhpcyxcbiAgICAgICAgbGVmdFByZXNzZWQsXG4gICAgICAgIHVwUHJlc3NlZCxcbiAgICAgICAgcmlnaHRQcmVzc2VkLFxuICAgICAgICBkb3duUHJlc3NlZCxcbiAgICAgICAgaXNQcmVzc2VkO1xuICAgICAgICBkb2N1bWVudC5hZGRFdmVudExpc3RlbmVyKCdrZXlkb3duJywgZnVuY3Rpb24oZSlcbiAgICAgICAge1xuICAgICAgICAgICAgc3dpdGNoIChlLmtleUNvZGUpXG4gICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgY2FzZSAzNzpcbiAgICAgICAgICAgICAgICAgICAgbGVmdFByZXNzZWQgPSB0cnVlO1xuICAgICAgICAgICAgICAgICAgICBfdGhpcy5kaXJYID0gLV90aGlzLnNwZWVkO1xuICAgICAgICAgICAgICAgICAgICBfdGhpcy5kaXYuY2xhc3NOYW1lPVwibW91c2UgZGlyMjcwXCI7XG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgIGNhc2UgMzg6XG4gICAgICAgICAgICAgICAgICAgIHVwUHJlc3NlZCA9IHRydWU7XG4gICAgICAgICAgICAgICAgICAgIF90aGlzLmRpclkgPSAtX3RoaXMuc3BlZWQ7XG4gICAgICAgICAgICAgICAgICAgIF90aGlzLmRpdi5jbGFzc05hbWU9XCJtb3VzZSBkaXIwXCI7XG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgIGNhc2UgMzk6XG4gICAgICAgICAgICAgICAgICAgIHJpZ2h0UHJlc3NlZCA9IHRydWU7XG4gICAgICAgICAgICAgICAgICAgIF90aGlzLmRpclggPSBfdGhpcy5zcGVlZDtcbiAgICAgICAgICAgICAgICAgICAgX3RoaXMuZGl2LmNsYXNzTmFtZT1cIm1vdXNlIGRpcjkwXCI7XG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgIGNhc2UgNDA6XG4gICAgICAgICAgICAgICAgICAgIGRvd25QcmVzc2VkID0gdHJ1ZTtcbiAgICAgICAgICAgICAgICAgICAgX3RoaXMuZGlyWSA9IF90aGlzLnNwZWVkO1xuICAgICAgICAgICAgICAgICAgICBfdGhpcy5kaXYuY2xhc3NOYW1lPVwibW91c2UgZGlyMTgwXCI7XG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgIGRlZmF1bHQ6XG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKGlzUHJlc3NlZCA9PSBmYWxzZSlcbiAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICBpc1ByZXNzZWQgPSB0cnVlO1xuICAgICAgICAgICAgICAgIGxvb3AgPSBzZXRJbnRlcnZhbCggZnVuY3Rpb24oKVxuICAgICAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICAgICAgLy8gQ29sbGlzaW9uIGNhbnZhc1xuICAgICAgICAgICAgICAgICAgICBpZiAoX3RoaXMucG9zWCA8PSAwKVxuICAgICAgICAgICAgICAgICAgICAgICAgX3RoaXMucG9zWCA9IDE7XG4gICAgICAgICAgICAgICAgICAgIGVsc2UgaWYgKF90aGlzLnBvc1ggPj0gY2FudmFzMS53aWR0aC1fdGhpcy53aWR0aClcbiAgICAgICAgICAgICAgICAgICAgICAgIF90aGlzLnBvc1ggPSBjYW52YXMxLndpZHRoIC0gX3RoaXMud2lkdGggLSAxO1xuICAgICAgICAgICAgICAgICAgICBlbHNlXG4gICAgICAgICAgICAgICAgICAgICAgICBfdGhpcy5wb3NYICs9IF90aGlzLmRpclg7XG5cbiAgICAgICAgICAgICAgICAgICAgaWYgKF90aGlzLnBvc1kgPD0gMClcbiAgICAgICAgICAgICAgICAgICAgICAgIF90aGlzLnBvc1kgPSAxO1xuICAgICAgICAgICAgICAgICAgICBlbHNlIGlmIChfdGhpcy5wb3NZID49IGNhbnZhczEuaGVpZ2h0LV90aGlzLmhlaWdodClcbiAgICAgICAgICAgICAgICAgICAgICAgIF90aGlzLnBvc1kgPSBjYW52YXMxLmhlaWdodC0gX3RoaXMuaGVpZ2h0IC0gMTtcbiAgICAgICAgICAgICAgICAgICAgZWxzZVxuICAgICAgICAgICAgICAgICAgICAgICAgX3RoaXMucG9zWSArPSBfdGhpcy5kaXJZO1xuXG4gICAgICAgICAgICAgICAgICAgIC8vIENvbGxpc2lvbiBvYnN0YWNsZXNcbiAgICAgICAgICAgICAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPD0gb2JzdGFjbGVzLmxlbmd0aCAtIDE7IGkrKylcbiAgICAgICAgICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIF90aGlzLnBvc1ggPj0gb2JzdGFjbGVzW2ldLnBvc1ggLSBvYnN0YWNsZXNbaV0ud2lkdGgvMS41ICYmXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgX3RoaXMucG9zWCA8PSBvYnN0YWNsZXNbaV0ucG9zWCArIG9ic3RhY2xlc1tpXS53aWR0aC8xLjUgJiZcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBfdGhpcy5wb3NZID49IG9ic3RhY2xlc1tpXS5wb3NZIC0gb2JzdGFjbGVzW2ldLmhlaWdodC8xLjUgJiZcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBfdGhpcy5wb3NZIDw9IG9ic3RhY2xlc1tpXS5wb3NZICsgb2JzdGFjbGVzW2ldLmhlaWdodC8xLjVcbiAgICAgICAgICAgICAgICAgICAgICAgIClcbiAgICAgICAgICAgICAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBzd2l0Y2ggKHRydWUpXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjYXNlIGxlZnRQcmVzc2VkOlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgX3RoaXMucG9zWCA9IG9ic3RhY2xlc1tpXS5wb3NYICsgX3RoaXMud2lkdGg7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSB1cFByZXNzZWQ6XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBfdGhpcy5wb3NZID0gb2JzdGFjbGVzW2ldLnBvc1kgKyBfdGhpcy5oZWlnaHQ7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSByaWdodFByZXNzZWQ6XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBfdGhpcy5wb3NYID0gb2JzdGFjbGVzW2ldLnBvc1ggLSBfdGhpcy53aWR0aDtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjYXNlIGRvd25QcmVzc2VkOlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgX3RoaXMucG9zWSA9IG9ic3RhY2xlc1tpXS5wb3NZIC0gX3RoaXMuaGVpZ2h0O1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRlZmF1bHQ6XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgICAgICAvLyBFYXQgY2hlZXNlXG4gICAgICAgICAgICAgICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDw9IGNoZWVzZXMubGVuZ3RoIC0gMTsgaSsrKVxuICAgICAgICAgICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgX3RoaXMucG9zWSAtIF90aGlzLmhlaWdodC8yIDwgY2hlZXNlc1tpXS5wb3NZICYmXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgX3RoaXMucG9zWSArIF90aGlzLmhlaWdodC8yID4gY2hlZXNlc1tpXS5wb3NZICYmXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgX3RoaXMucG9zWCAtIF90aGlzLndpZHRoLzIgPCBjaGVlc2VzW2ldLnBvc1ggJiZcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBfdGhpcy5wb3NYICsgX3RoaXMud2lkdGgvMiA+IGNoZWVzZXNbaV0ucG9zWFxuICAgICAgICAgICAgICAgICAgICAgICAgKVxuICAgICAgICAgICAgICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNoZWVzZXNbaV0udXBkYXRlKCk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgc2NvcmUgKz0gMTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBzY29yZURpdi5pbm5lckhUTUwgPSBzY29yZTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgICAgIC8vIEVhdCByb3R0ZW4tY2hlZXNlXG4gICAgICAgICAgICAgICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDw9IHJvdHRlbkNoZWVzZXMubGVuZ3RoIC0gMTsgaSsrKVxuICAgICAgICAgICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgX3RoaXMucG9zWSAtIF90aGlzLmhlaWdodCA8IHJvdHRlbkNoZWVzZXNbaV0ucG9zWSAmJlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIF90aGlzLnBvc1kgKyBfdGhpcy5oZWlnaHQgPiByb3R0ZW5DaGVlc2VzW2ldLnBvc1kgJiZcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBfdGhpcy5wb3NYIC0gX3RoaXMud2lkdGggPCByb3R0ZW5DaGVlc2VzW2ldLnBvc1ggJiZcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBfdGhpcy5wb3NYICsgX3RoaXMud2lkdGggPiByb3R0ZW5DaGVlc2VzW2ldLnBvc1hcbiAgICAgICAgICAgICAgICAgICAgICAgIClcbiAgICAgICAgICAgICAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICByb3R0ZW5DaGVlc2VzW2ldLnVwZGF0ZSgpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNjb3JlIDw9IDAgPyBzY29yZSA9IDAgOiBzY29yZSAtPSAxO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNjb3JlRGl2LmlubmVySFRNTCA9IHNjb3JlO1xuXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIGJsYWNrT3V0MSA9IG5ldyBibGFja091dCgpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJsYWNrT3V0MS5jcmVhdGUoKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZXRUaW1lb3V0KGZ1bmN0aW9uKClcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJsYWNrT3V0MS5yZW1vdmUoKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9LCAxMDAwKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgICAgIC8vIERyaW5rIHdpbmVcbiAgICAgICAgICAgICAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPD0gd2luZXMubGVuZ3RoIC0gMTsgaSsrKVxuICAgICAgICAgICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgX3RoaXMucG9zWSAtIF90aGlzLmhlaWdodCA8IHdpbmVzW2ldLnBvc1kgJiZcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBfdGhpcy5wb3NZICsgX3RoaXMuaGVpZ2h0ID4gd2luZXNbaV0ucG9zWSAmJlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIF90aGlzLnBvc1ggLSBfdGhpcy53aWR0aCA8IHdpbmVzW2ldLnBvc1ggJiZcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBfdGhpcy5wb3NYICsgX3RoaXMud2lkdGggPiB3aW5lc1tpXS5wb3NYXG4gICAgICAgICAgICAgICAgICAgICAgICApXG4gICAgICAgICAgICAgICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgd2luZXNbaV0udXBkYXRlKCk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgc2NvcmUgPD0gMCA/IHNjb3JlID0gMCA6IHNjb3JlIC09IDE7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgc2NvcmVEaXYuaW5uZXJIVE1MID0gc2NvcmU7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgc2V0SW50ZXJ2YWwoZnVuY3Rpb24oKVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc3dpdGNoICh0cnVlKVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjYXNlIChsZWZ0UHJlc3NlZCk6XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZS5rZXlDb2RlID0gMzk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjYXNlICh1cFByZXNzZWQpOlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGUua2V5Q29kZSA9IDQwO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSAocmlnaHRQcmVzc2VkKTpcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBlLmtleUNvZGUgPSAzNztcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgKGRvd25QcmVzc2VkKTpcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBlLmtleUNvZGUgPSAzODtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRlZmF1bHQ6XG5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0sIDUwMDApXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgc2V0VGltZW91dChmdW5jdGlvbigpXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjbGVhckludGVydmFsKCk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfSwgNTAwMClcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgICAgIC8vIENvbGxpc2lvbiBjYXRcbiAgICAgICAgICAgICAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPD0gY2F0cy5sZW5ndGggLSAxOyBpKyspXG4gICAgICAgICAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBfdGhpcy5wb3NZIC0gX3RoaXMuaGVpZ2h0LzIgPCBjYXRzW2ldLnBvc1kgJiZcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBfdGhpcy5wb3NZICsgX3RoaXMuaGVpZ2h0LzIgPiBjYXRzW2ldLnBvc1kgJiZcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBfdGhpcy5wb3NYIC0gX3RoaXMud2lkdGgvMiA8IGNhdHNbaV0ucG9zWCAmJlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIF90aGlzLnBvc1ggKyBfdGhpcy53aWR0aC8yID4gY2F0c1tpXS5wb3NYXG4gICAgICAgICAgICAgICAgICAgICAgICApXG4gICAgICAgICAgICAgICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgbG9jYXRpb24ucmVsb2FkKCk7XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgICAgICAvLyBVcGRhdGUgcG9zaXRpb25cbiAgICAgICAgICAgICAgICAgICAgX3RoaXMuZGl2LnN0eWxlLmxlZnQ9IF90aGlzLnBvc1ggK1wicHhcIjtcbiAgICAgICAgICAgICAgICAgICAgX3RoaXMuZGl2LnN0eWxlLnRvcCA9IF90aGlzLnBvc1kgK1wicHhcIjtcblxuICAgICAgICAgICAgICAgIH0sIDEwICk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH0sIGZhbHNlKTtcblxuICAgICAgICBkb2N1bWVudC5hZGRFdmVudExpc3RlbmVyKCdrZXl1cCcsIGZ1bmN0aW9uKGV2ZW50KVxuICAgICAgICB7XG4gICAgICAgICAgICBsZWZ0UHJlc3NlZCA9IGZhbHNlO1xuICAgICAgICAgICAgdXBQcmVzc2VkID0gZmFsc2U7XG4gICAgICAgICAgICByaWdodFByZXNzZWQgPSBmYWxzZTtcbiAgICAgICAgICAgIGRvd25QcmVzc2VkID0gZmFsc2U7XG4gICAgICAgICAgICBpc1ByZXNzZWQgPSBmYWxzZTtcbiAgICAgICAgICAgIF90aGlzLmRpclggPSAwO1xuICAgICAgICAgICAgX3RoaXMuZGlyWSA9IDA7XG4gICAgICAgICAgICBjbGVhckludGVydmFsKGxvb3ApO1xuICAgICAgICB9LCBmYWxzZSk7XG4gICAgfVxufVxuXG4vLyBOZXcgbW91c2VcbnZhciBtb3VzZTEgPSBuZXcgbW91c2UgKDUwLCA1MCwgMjAsIDIwMCwgNiwgMCwgMCk7XG5tb3VzZTEuY3JlYXRlKCk7XG5tb3VzZTEubW92ZSgpO1xuIl19
